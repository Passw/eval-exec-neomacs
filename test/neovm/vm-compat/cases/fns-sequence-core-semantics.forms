; fns.c â€” sequence & list core operations
; length
(length '(a b c))
(length "hello")
(length [1 2 3])
(length nil)
(length (make-bool-vector 5 t))
(condition-case err (length 42) (error (car err)))
(condition-case err (length '(a . b)) (error (car err)))

; safe-length
(safe-length '(1 2 3))
(safe-length nil)
(safe-length '(1 . 2))
(safe-length 5)

; proper-list-p
(proper-list-p '(1 2 3))
(proper-list-p '(1 . 2))
(proper-list-p nil)
(proper-list-p 5)
(proper-list-p '(1 2 . 3))

; copy-sequence
(copy-sequence '(1 2 3))
(let ((x '(1 2 3))) (eq (copy-sequence x) x))
(copy-sequence "abc")
(let ((s "abc")) (equal (copy-sequence s) s))
(copy-sequence [1 2])
(let ((v [1 2])) (eq (copy-sequence v) v))
(copy-sequence nil)
(condition-case err (copy-sequence 42) (error (car err)))
(length (copy-sequence (make-bool-vector 3 t)))

; reverse (non-destructive)
(reverse '(1 2 3))
(reverse [1 2 3])
(reverse "abc")
(reverse nil)
(condition-case err (reverse 42) (error (car err)))
(condition-case err (reverse '(1 . 2)) (error (car err)))

; ntake
(ntake 2 '(a b c d))
(ntake 0 '(a b))
(ntake 10 '(a b))
(ntake -1 '(a b c))

; fillarray
(fillarray (make-vector 3 0) 42)
(fillarray (make-string 3 ?a) ?z)
(let ((bv (make-bool-vector 4 nil))) (fillarray bv t) (length bv))
(condition-case err (fillarray '(1 2) 0) (error (car err)))

; substring-no-properties
(substring-no-properties "hello" 1 3)
(substring-no-properties "hello" 2)
(substring-no-properties "hello")

; string-bytes
(string-bytes "hello")
(string-bytes "")
(> (string-bytes "hello") 0)
(condition-case err (string-bytes 42) (error (car err)))

; clear-string
(let ((s (copy-sequence "hello"))) (clear-string s) (length s))
(let ((s (copy-sequence ""))) (clear-string s) s)
(condition-case err (clear-string 42) (error (car err)))

; identity
(identity 42)
(identity nil)
(identity '(1 2 3))
(identity "hello")

; value<
(value< 1 2)
(value< 2 1)
(value< 1 1)
(value< "a" "b")
(value< "b" "a")
(value< 'a 'b)
(value< nil t)

; length<
(length< '(a b c) 4)
(length< '(a b c) 3)
(length< '(a b c) 2)

; length=
(length= '(a b) 2)
(length= '(a b) 3)
(length= '(a b) 1)

; length>
(length> '(a b c) 1)
(length> '(a b c) 3)
(length> '(a b c) 2)
