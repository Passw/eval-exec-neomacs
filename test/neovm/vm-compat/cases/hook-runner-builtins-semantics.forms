(mapcar (lambda (sym)
          (list sym
                (fboundp sym)
                (subrp (symbol-function sym))
                (subr-arity (symbol-function sym))
                (commandp sym)))
        '(run-hook-with-args-until-success
          run-hook-with-args-until-failure
          run-hook-wrapped
          run-mode-hooks))

(list
 (list 'until-success
       (condition-case err
           (run-hook-with-args-until-success)
         (error (car err)))
       (condition-case err
           (run-hook-with-args-until-success 1)
         (error err))
       (progn
         (setq hs-log nil)
         (defun hs-a (&rest args) (setq hs-log (cons (cons 'a args) hs-log)) nil)
         (defun hs-b (&rest args) (setq hs-log (cons (cons 'b args) hs-log)) 'ok)
         (defun hs-c (&rest args) (setq hs-log (cons (cons 'c args) hs-log)) 'late)
         (setq hs-hook '(hs-a hs-b hs-c))
         (list (condition-case err
                   (run-hook-with-args-until-success 'hs-hook 1 2)
                 (error err))
               hs-log))
       (progn
         (setq hs-hook 'hs-b)
         (list (condition-case err
                   (run-hook-with-args-until-success 'hs-hook 3)
                 (error err))
               hs-log))
       (progn
         (setq hs-hook nil)
         (condition-case err
             (run-hook-with-args-until-success 'hs-hook 4)
           (error err)))
       (progn
         (setq hs-hook t)
         (condition-case err
             (run-hook-with-args-until-success 'hs-hook 5)
           (error err))))
 (list 'until-failure
       (condition-case err
           (run-hook-with-args-until-failure)
         (error (car err)))
       (condition-case err
           (run-hook-with-args-until-failure 1)
         (error err))
       (progn
         (setq hf-log nil)
         (defun hf-a (&rest args) (setq hf-log (cons (cons 'a args) hf-log)) t)
         (defun hf-b (&rest args) (setq hf-log (cons (cons 'b args) hf-log)) nil)
         (defun hf-c (&rest args) (setq hf-log (cons (cons 'c args) hf-log)) t)
         (setq hf-hook '(hf-a hf-b hf-c))
         (list (condition-case err
                   (run-hook-with-args-until-failure 'hf-hook 1)
                 (error err))
               hf-log))
       (progn
         (setq hf-hook 'hf-a)
         (list (condition-case err
                   (run-hook-with-args-until-failure 'hf-hook 2)
                 (error err))
               hf-log))
       (progn
         (setq hf-hook nil)
         (condition-case err
             (run-hook-with-args-until-failure 'hf-hook 3)
           (error err)))
       (progn
         (setq hf-hook t)
         (condition-case err
             (run-hook-with-args-until-failure 'hf-hook 4)
           (error err))))
 (list 'wrapped
       (condition-case err (run-hook-wrapped) (error (car err)))
       (condition-case err (run-hook-wrapped 1 2) (error err))
       (progn
         (setq hw-log nil)
         (defun hw-a (&rest args) (setq hw-log (cons (cons 'a args) hw-log)) nil)
         (defun hw-wrap (fn &rest args)
           (setq hw-log (cons (cons 'wrap (cons fn args)) hw-log))
           (apply fn args))
         (setq hw-hook '(hw-a))
         (list (condition-case err
                   (run-hook-wrapped 'hw-hook 'hw-wrap 7 8)
                 (error err))
               hw-log))
       (progn
         (setq hw-hook t)
         (condition-case err
             (run-hook-wrapped 'hw-hook 'hw-wrap 9)
           (error err))))
 (list 'run-mode-hooks
       (condition-case err (run-mode-hooks) (error err))
       (progn
         (setq rm-log nil)
         (defun rm-a () (setq rm-log (cons 'a rm-log)) nil)
         (defun rm-b () (setq rm-log (cons 'b rm-log)) nil)
         (setq rm-a-hook '(rm-a))
         (setq rm-b-hook '(rm-b))
         (list (condition-case err
                   (run-mode-hooks 'rm-a-hook 'rm-b-hook)
                 (error err))
               rm-log))
       (progn
         (condition-case err (run-mode-hooks 1) (error err)))))
