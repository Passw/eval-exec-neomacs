; insert-file-contents should honor BEG/END byte offsets.
(let ((f (make-temp-file "ifc-beg-end-")))
  (unwind-protect
      (progn
        (with-temp-buffer
          (insert "abcdef")
          (write-region nil nil f nil 'quiet))
        (with-temp-buffer
          (insert-file-contents f nil 2 4)
          (buffer-string)))
    (ignore-errors (delete-file f))))

(let ((f (make-temp-file "ifc-beg-end-")))
  (unwind-protect
      (progn
        (with-temp-buffer
          (insert "abcdef")
          (write-region nil nil f nil 'quiet))
        (with-temp-buffer
          (insert-file-contents f nil nil 4)
          (buffer-string)))
    (ignore-errors (delete-file f))))

(let ((f (make-temp-file "ifc-beg-end-")))
  (unwind-protect
      (progn
        (with-temp-buffer
          (insert "abcdef")
          (write-region nil nil f nil 'quiet))
        (with-temp-buffer
          (insert-file-contents f nil 4 nil)
          (buffer-string)))
    (ignore-errors (delete-file f))))

(let ((f (make-temp-file "ifc-beg-end-")))
  (unwind-protect
      (progn
        (with-temp-buffer
          (insert "abcdef")
          (write-region nil nil f nil 'quiet))
        (with-temp-buffer
          (cadr (insert-file-contents f nil 4 2))))
    (ignore-errors (delete-file f))))

(let ((f (make-temp-file "ifc-beg-end-")))
  (unwind-protect
      (progn
        (with-temp-buffer
          (insert "abcdef")
          (write-region nil nil f nil 'quiet))
        (with-temp-buffer
          (condition-case err
              (insert-file-contents f nil -1 2)
            (error err))))
    (ignore-errors (delete-file f))))

(let ((f (make-temp-file "ifc-beg-end-")))
  (unwind-protect
      (progn
        (with-temp-buffer
          (insert "abcdef")
          (write-region nil nil f nil 'quiet))
        (with-temp-buffer
          (insert-file-contents f nil 2 99)
          (list (buffer-string) (buffer-size))))
    (ignore-errors (delete-file f))))
