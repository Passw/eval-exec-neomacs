; Compatibility coverage for internal file wrapper primitives.
(subr-arity (symbol-function 'delete-file-internal))
(subr-arity (symbol-function 'delete-directory-internal))
(subr-arity (symbol-function 'make-directory-internal))
(subr-arity (symbol-function 'find-file-name-handler))

(let ((f (make-temp-file "vm-del-int-")))
  (list (delete-file-internal f) (file-exists-p f)))
(let ((d (make-temp-file "vm-del-dir-int-" t)))
  (list (delete-directory-internal d) (file-exists-p d)))
(let ((d (make-temp-file "vm-mkdir-int-base-" t)))
  (let ((child (expand-file-name "child" d)))
    (prog1 (list (make-directory-internal child) (file-directory-p child))
      (delete-directory child)
      (delete-directory d))))
(find-file-name-handler "/tmp/no-handler" 'delete-file)

(condition-case err (delete-file-internal 1) (error err))
(condition-case err (delete-directory-internal 1) (error err))
(condition-case err (make-directory-internal 1) (error err))
(condition-case err (find-file-name-handler 1 'delete-file) (error err))
(condition-case err (find-file-name-handler "/tmp" 1) (error err))
(condition-case err (find-file-name-handler "/tmp") (error err))
