(let ((ht (make-hash-table :test 'equal :size 1)))
  (puthash 1 'x ht)
  (puthash 2 'y ht)
  (internal--hash-table-index-size ht))

(let ((ht (make-hash-table :test 'equal :size 2)))
  (puthash 1 'x ht)
  (puthash 2 'y ht)
  (puthash 3 'z ht)
  (internal--hash-table-index-size ht))

(let ((ht (make-hash-table :test 'equal)))
  (puthash 1 'x ht)
  (internal--hash-table-index-size ht))

(let ((ht (make-hash-table :test 'equal :size 10)))
  (dotimes (i 10) (puthash i i ht))
  (internal--hash-table-index-size ht))

(let ((ht (make-hash-table :test 'equal :size 10)))
  (dotimes (i 11) (puthash i i ht))
  (internal--hash-table-index-size ht))

(let ((ht (make-hash-table :test 'equal :size 1)))
  (puthash 1 'x ht)
  (puthash 2 'y ht)
  (hash-table-size ht))

(let ((ht (make-hash-table :test 'equal)))
  (puthash 1 'x ht)
  (hash-table-size ht))

(let ((ht (make-hash-table :test 'equal :size 10)))
  (dotimes (i 11) (puthash i i ht))
  (hash-table-size ht))
