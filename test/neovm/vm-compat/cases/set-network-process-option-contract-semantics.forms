(list
 (let ((p (make-network-process :name "neo-netopt-contract-a" :server t :service 0)))
   (unwind-protect
       (list
        (condition-case err (set-network-process-option p :foo 1) (error err))
        (condition-case err (set-network-process-option p :foo 1 nil) (error err))
        (condition-case err (set-network-process-option p :foo 1 t) (error err))
        (condition-case err (set-network-process-option p :foo 1 'x) (error err))
        (condition-case err (set-network-process-option p nil 1 t) (error err))
        (condition-case err (set-network-process-option p nil 1 nil) (error err))
        (condition-case err (set-network-process-option p 1 1 t) (error err))
        (condition-case err (set-network-process-option p 1 1 nil) (error err)))
     (ignore-errors (delete-process p))))
 (let ((p (start-process "neo-netopt-contract-real" nil "cat")))
   (unwind-protect
       (list
        (condition-case err (set-network-process-option p :foo 1) (error err))
        (condition-case err (set-network-process-option p :foo 1 t) (error err)))
     (ignore-errors (delete-process p))))
 (list
  (condition-case err (set-network-process-option) (error err))
  (condition-case err (set-network-process-option 1 :foo) (error err))
  (condition-case err (set-network-process-option 1 :foo 1 nil nil) (error err))))
