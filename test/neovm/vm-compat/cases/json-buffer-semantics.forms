(fboundp 'json-parse-buffer)
(fboundp 'json-insert)
(with-temp-buffer
  (insert "{\"a\":1}")
  (goto-char (point-min))
  (list (json-parse-buffer :object-type 'alist) (point)))
(with-temp-buffer
  (insert "xx {\"a\":1}")
  (goto-char (+ (point-min) 3))
  (list (json-parse-buffer :object-type 'alist) (point)))
(with-temp-buffer
  (insert "{\"a\":1} trailing")
  (goto-char (point-min))
  (list (json-parse-buffer :object-type 'alist)
        (buffer-substring (point) (point-max))))
(with-temp-buffer
  (insert "xx {\"a\":1}")
  (goto-char (point-min))
  (condition-case err (json-parse-buffer :object-type 'alist) (error (car err))))
(with-temp-buffer
  (insert "{\"a\":1}")
  (goto-char (point-max))
  (condition-case err (json-parse-buffer :object-type 'alist) (error (car err))))
(with-temp-buffer
  (insert "  {\"a\":1}")
  (goto-char (point-min))
  (list (json-parse-buffer :object-type 'alist) (point)))
(with-temp-buffer
  (insert "abc")
  (goto-char (point-min))
  (json-insert [1 2 3])
  (list (buffer-string) (point)))
(with-temp-buffer
  (json-insert [:myfalse :mynull] :false-object :myfalse :null-object :mynull)
  (buffer-string))
(with-temp-buffer
  (insert "{\"a\":false,\"b\":null}")
  (goto-char (point-min))
  (json-parse-buffer :object-type 'alist :false-object :f :null-object :n))
