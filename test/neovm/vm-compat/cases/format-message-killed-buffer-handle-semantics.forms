(fboundp 'format)
(fboundp 'message)
(fboundp 'format-message)
(fboundp 'generate-new-buffer)
(fboundp 'kill-buffer)
(fboundp 'current-thread)
(fboundp 'terminal-list)
(fboundp 'selected-frame)
(fboundp 'selected-window)
(fboundp 'make-mutex)
(fboundp 'make-condition-variable)

(let* ((b (generate-new-buffer "fmt-killed-vm")))
  (kill-buffer b)
  (string= (format "%S" b) "#<killed buffer>"))

(let* ((b (generate-new-buffer "fmt-killed-vm-lower")))
  (kill-buffer b)
  (string= (format "%s" b) "#<killed buffer>"))

(let* ((b (generate-new-buffer "msg-killed-vm")))
  (kill-buffer b)
  (string= (message "%S" b) "#<killed buffer>"))

(let* ((b (generate-new-buffer "msg-killed-vm-lower")))
  (kill-buffer b)
  (string= (message "%s" b) "#<killed buffer>"))

(let* ((b (generate-new-buffer "fmt-live-vm")))
  (prog1
      (string-prefix-p "#<buffer fmt-live-vm" (format "%S" b))
    (kill-buffer b)))

(let* ((b (generate-new-buffer "msg-live-vm")))
  (prog1
      (string-prefix-p "#<buffer msg-live-vm" (message "%S" b))
    (kill-buffer b)))

(let* ((b (generate-new-buffer "fmt-live-vm-lower")))
  (prog1
      (string= "fmt-live-vm-lower" (format "%s" b))
    (kill-buffer b)))

(let* ((b (generate-new-buffer "msg-live-vm-lower")))
  (prog1
      (string= "msg-live-vm-lower" (message "%s" b))
    (kill-buffer b)))

(string-prefix-p "#<thread" (format "%s" (current-thread)))

(string-prefix-p "#<thread" (message "%s" (current-thread)))

(string-prefix-p "#<thread" (format "%S" (current-thread)))

(string-prefix-p "#<thread" (message "%S" (current-thread)))

(let ((term (car (terminal-list))))
  (string-prefix-p "#<terminal" (format "%s" term)))

(let ((term (car (terminal-list))))
  (string-prefix-p "#<terminal" (message "%s" term)))

(let ((term (car (terminal-list))))
  (string-prefix-p "#<terminal" (format "%S" term)))

(let ((term (car (terminal-list))))
  (string-prefix-p "#<terminal" (message "%S" term)))

(string-prefix-p "#<mutex" (format "%S" (make-mutex)))

(string-prefix-p "#<mutex" (message "%S" (make-mutex)))

(string-prefix-p "#<mutex" (format "%s" (make-mutex)))

(string-prefix-p "#<mutex" (message "%s" (make-mutex)))

(let* ((m (make-mutex))
       (cv (make-condition-variable m)))
  (string-prefix-p "#<condvar" (format "%S" cv)))

(let* ((m (make-mutex))
       (cv (make-condition-variable m)))
  (string-prefix-p "#<condvar" (message "%S" cv)))

(let* ((m (make-mutex))
       (cv (make-condition-variable m)))
  (string-prefix-p "#<condvar" (format "%s" cv)))

(let* ((m (make-mutex))
       (cv (make-condition-variable m)))
  (string-prefix-p "#<condvar" (message "%s" cv)))

(string-prefix-p "#<frame" (format "%S" (selected-frame)))

(string-prefix-p "#<frame" (message "%S" (selected-frame)))

(string-prefix-p "#<frame" (format "%s" (selected-frame)))

(string-prefix-p "#<frame" (message "%s" (selected-frame)))

(string-prefix-p "#<window" (format "%S" (selected-window)))
(string-match-p "on \\*scratch\\*>" (format "%S" (selected-window)))

(string-prefix-p "#<window" (message "%S" (selected-window)))
(string-match-p "on \\*scratch\\*>" (message "%S" (selected-window)))

(string-prefix-p "#<window" (format "%s" (selected-window)))
(string-match-p "on \\*scratch\\*>" (format "%s" (selected-window)))

(string-prefix-p "#<window" (message "%s" (selected-window)))
(string-match-p "on \\*scratch\\*>" (message "%s" (selected-window)))

(string-prefix-p "#<thread" (format-message "%S" (current-thread)))

(let ((term (car (terminal-list))))
  (string-prefix-p "#<terminal" (format-message "%S" term)))

(string-prefix-p "#<frame" (format-message "%S" (selected-frame)))

(string-prefix-p "#<window" (format-message "%S" (selected-window)))
(string-match-p "on \\*scratch\\*>" (format-message "%S" (selected-window)))

(let* ((b (generate-new-buffer "fmtmsg-live-vm")))
  (prog1
      (string-prefix-p "#<buffer fmtmsg-live-vm" (format-message "%S" b))
    (kill-buffer b)))

(let* ((b (generate-new-buffer "fmtmsg-live-vm-s")))
  (prog1
      (string= "fmtmsg-live-vm-s" (format-message "%s" b))
    (kill-buffer b)))

(let* ((b (generate-new-buffer "fmtmsg-killed-vm")))
  (kill-buffer b)
  (string= (format-message "%S" b) "#<killed buffer>"))

(let* ((b (generate-new-buffer "fmtmsg-killed-vm-s")))
  (kill-buffer b)
  (string= (format-message "%s" b) "#<killed buffer>"))
