(fboundp 'error-message-string)
(fboundp 'make-mutex)
(fboundp 'make-condition-variable)
(fboundp 'terminal-list)

(let ((msg (condition-case e
               (progn (error "%S" (make-mutex)) "")
             (error (error-message-string e)))))
  (string-prefix-p "#<mutex" msg))

(let* ((m (make-mutex))
       (cv (make-condition-variable m))
       (msg (condition-case e
                (progn (error "%S" cv) "")
              (error (error-message-string e)))))
  (string-prefix-p "#<condvar" msg))

(let* ((term (car (terminal-list)))
       (msg (condition-case e
                (progn (error "%S" term) "")
              (error (error-message-string e)))))
  (string-prefix-p "#<terminal" msg))
