(fboundp 'command-remapping)
(subr-arity (symbol-function 'command-remapping))

(with-temp-buffer
  (let ((err (condition-case e
                 (command-remapping 'ignore 0)
               (error e))))
    (list (car err) (bufferp (cadr err)) (caddr err))))

(with-temp-buffer
  (let ((err (condition-case e
                 (command-remapping 'ignore -1)
               (error e))))
    (list (car err) (bufferp (cadr err)) (caddr err))))

(with-temp-buffer
  (let ((err (condition-case e
                 (command-remapping 'ignore 2)
               (error e))))
    (list (car err) (bufferp (cadr err)) (caddr err))))

(with-temp-buffer
  (let ((m (make-sparse-keymap)))
    (define-key m [remap ignore] 'self-insert-command)
    (list
     (command-remapping 'ignore 1 m)
     (command-remapping 'ignore t m)
     (command-remapping 'ignore 'foo m)
     (command-remapping 'ignore "x" m)
     (command-remapping 'ignore [1] m)
     (command-remapping 'ignore '(1) m)
     (command-remapping 'ignore 1.5 m)
     (command-remapping 'ignore (copy-marker (point)) m))))

(with-temp-buffer
  (let ((err (condition-case e
                 (command-remapping nil 0)
               (error e))))
    (list (car err) (bufferp (cadr err)) (caddr err))))

(with-temp-buffer
  (condition-case e
      (command-remapping 'ignore 0 t)
    (error e)))

(with-temp-buffer
  (command-remapping 0 0))
