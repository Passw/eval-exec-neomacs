(list
 (let ((name "neo-sp-buf-create"))
   (ignore-errors (kill-buffer name))
   (let ((p (start-process "neo-sp-buf-create-proc" name "cat")))
     (unwind-protect
         (list
          (bufferp (get-buffer name))
          (bufferp (process-buffer p))
          (equal (buffer-name (process-buffer p)) name)
          (eq (process-buffer p) (get-buffer name)))
       (ignore-errors (delete-process p))
       (ignore-errors (kill-buffer name)))))
 (let ((name "neo-sp-buf-existing"))
   (let ((b (get-buffer-create name)))
     (let ((p (start-process "neo-sp-buf-existing-proc" name "cat")))
       (unwind-protect
           (list
            (bufferp b)
            (bufferp (process-buffer p))
            (eq (process-buffer p) b)
            (eq (process-buffer p) (get-buffer name)))
         (ignore-errors (delete-process p))
         (ignore-errors (kill-buffer name)))))))
