; start-process should accept buffer objects, reject non-string names,
; and enforce string contracts for buffer/program/argv (except PROGRAM=nil).
(with-temp-buffer
  (let ((p (start-process "neovm-sp-contract-buffer" (current-buffer) "cat")))
    (unwind-protect
        (list (processp p)
              (null (condition-case err (process-send-eof nil) (error err)))
              (null (condition-case err (process-running-child-p nil) (error err))))
      (ignore-errors (delete-process p)))))
(condition-case err (start-process 'neovm-sp-contract-name nil "cat") (error err))
(condition-case err (start-process t nil "cat") (error err))
(condition-case err (start-process nil nil "cat") (error err))
(condition-case err (start-process "neovm-sp-contract-buf-symbol" 'x "cat") (error err))
(condition-case err (start-process "neovm-sp-contract-buf-t" t "cat") (error err))
(condition-case err (start-process "neovm-sp-contract-buf-int" 1 "cat") (error err))
(condition-case err (start-process "neovm-sp-contract-prog-symbol" nil 'cat) (error err))
(condition-case err (start-process "neovm-sp-contract-prog-t" nil t) (error err))
(processp (start-process "neovm-sp-contract-prog-nil" nil nil))
(condition-case err (start-process "neovm-sp-contract-arg-symbol" nil "cat" 'a) (error err))
(condition-case err (start-process "neovm-sp-contract-arg-t" nil "cat" t) (error err))
(condition-case err (start-process "neovm-sp-contract-arg-nil" nil "cat" nil) (error err))
(condition-case err (start-process "neovm-sp-contract-arg-int" nil "cat" 1) (error err))
