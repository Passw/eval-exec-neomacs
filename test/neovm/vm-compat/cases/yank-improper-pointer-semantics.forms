; yank/yank-pop behavior with proper/improper non-string pointer lists.
(with-temp-buffer
  (setq kill-ring (list "a" "b" "c"))
  (setq kill-ring-yank-pointer '("b" . "c"))
  (condition-case err
      (yank)
    (error (car err))))

(with-temp-buffer
  (setq kill-ring (list "a" "b" "c"))
  (setq kill-ring-yank-pointer '(1 2))
  (yank)
  (list (buffer-string) (car kill-ring-yank-pointer)))

(with-temp-buffer
  (setq kill-ring (list "a" "b" "c"))
  (setq kill-ring-yank-pointer '(1 2 3 4))
  (yank)
  (list (buffer-string) (car kill-ring-yank-pointer)))

(with-temp-buffer
  (setq kill-ring (list "a" "b" "c"))
  (setq kill-ring-yank-pointer '(1 2))
  (yank)
  (setq last-command 'yank)
  (yank-pop 1)
  (list (buffer-string) (car kill-ring-yank-pointer)))

(with-temp-buffer
  (setq kill-ring (list "a" "b" "c"))
  (setq kill-ring-yank-pointer '("b" . "c"))
  (setq last-command 'yank)
  (condition-case err
      (yank-pop 1)
    (error (car err))))
