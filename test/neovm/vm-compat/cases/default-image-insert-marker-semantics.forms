; default/image/insert/integer-or-marker compatibility probes.

(fboundp 'integer-or-marker-p)
(subr-arity (symbol-function 'integer-or-marker-p))

(fboundp 'default-boundp)
(subr-arity (symbol-function 'default-boundp))

(fboundp 'default-toplevel-value)
(subr-arity (symbol-function 'default-toplevel-value))

(fboundp 'image-cache-size)
(subr-arity (symbol-function 'image-cache-size))

(fboundp 'image-metadata)
(subr-arity (symbol-function 'image-metadata))

(fboundp 'imagep)
(subr-arity (symbol-function 'imagep))

(fboundp 'insert-char)
(subr-arity (symbol-function 'insert-char))

(fboundp 'insert-byte)
(subr-arity (symbol-function 'insert-byte))

(integer-or-marker-p 1)
(integer-or-marker-p ?A)
(integer-or-marker-p (make-marker))
(integer-or-marker-p "x")

(let ((s (make-symbol "neovm-default-boundp-unbound")))
  (list (default-boundp s)
        (condition-case err
            (default-toplevel-value s)
          (void-variable (list (car err) (cdr err))))))

(let ((s (make-symbol "neovm-default-boundp-bound")))
  (set-default s 42)
  (list (default-boundp s) (default-toplevel-value s)))

(condition-case err
    (default-boundp "x")
  (wrong-type-argument (list 'default-boundp-type (car err) (cdr err))))

(condition-case err
    (default-toplevel-value "x")
  (wrong-type-argument
   (list 'default-toplevel-value-type (car err) (cdr err))))

(image-cache-size)
(imagep '(image :type png :file "x.png"))
(imagep '(image :type png))
(imagep '(image :file "x.png"))
(imagep '(image :type jpg :file "x.jpg"))
(imagep '(image :type png :file "x.png" :data "raw"))
(image-metadata 1)

(condition-case err
    (image-metadata '(image :type png :file "x.png"))
  (error (list 'image-metadata-error (car err) (cdr err))))

(condition-case err
    (image-metadata '(image :type png :file "x.png") t)
  (wrong-type-argument (list 'image-metadata-frame (car err) (cdr err))))

(with-temp-buffer
  (insert-char ?A 3)
  (buffer-string))

(with-temp-buffer
  (insert-char ?A 0)
  (buffer-string))

(condition-case err
    (insert-char -1 1)
  (wrong-type-argument (list 'insert-char-negative (car err) (cdr err))))

(condition-case err
    (insert-char "a" 1)
  (wrong-type-argument (list 'insert-char-type (car err) (cdr err))))

(condition-case err
    (insert-char ?A 'x)
  (wrong-type-argument (list 'insert-char-count (car err) (cdr err))))

(with-temp-buffer
  (insert-char ?B 2 t)
  (buffer-string))

(with-temp-buffer
  (insert-char 1114112 1)
  (string-to-list (buffer-string)))

(with-temp-buffer
  (insert-char 2097152 2)
  (string-to-list (buffer-string)))

(condition-case err
    (insert-char 4194304 1)
  (wrong-type-argument (list 'insert-char-high (car err) (cdr err))))

(with-temp-buffer
  (insert-byte 65 3)
  (buffer-string))

(with-temp-buffer
  (insert-byte 65 0)
  (buffer-string))

(with-temp-buffer
  (insert-byte 255 1)
  (string-bytes (buffer-string)))

(condition-case err
    (insert-byte 256 1)
  (args-out-of-range (list 'insert-byte-high (car err) (cdr err))))

(condition-case err
    (insert-byte -1 1)
  (args-out-of-range (list 'insert-byte-low (car err) (cdr err))))

(condition-case err
    (insert-byte "x" 1)
  (wrong-type-argument (list 'insert-byte-type (car err) (cdr err))))

(condition-case err
    (insert-byte 65 'x)
  (wrong-type-argument (list 'insert-byte-count (car err) (cdr err))))

(with-temp-buffer
  (insert-byte 67 2 t)
  (buffer-string))
