(defun neovm-vm-compat-make-dead-window ()
  (let ((w (split-window)))
    (delete-window w)
    w))

(let ((w (neovm-vm-compat-make-dead-window)))
  (condition-case err
      (frame-terminal w)
    (error (let ((msg (error-message-string err)))
             (list (car err)
                   (not (null (string-match-p "frame-live-p" msg)))
                   (not (null (string-match-p "#<window [0-9]+>" msg)))
                   (not (null (string-match-p " on " msg))))))))

(let ((w (neovm-vm-compat-make-dead-window)))
  (condition-case err
      (tty-type w)
    (error (let ((msg (error-message-string err)))
             (list (car err)
                   (not (null (string-match-p "terminal-live-p" msg)))
                   (not (null (string-match-p "#<window [0-9]+>" msg)))
                   (not (null (string-match-p " on " msg))))))))

(let ((w (neovm-vm-compat-make-dead-window)))
  (condition-case err
      (terminal-name w)
    (error (let ((msg (error-message-string err)))
             (list (car err)
                   (not (null (string-match-p "terminal-live-p" msg)))
                   (not (null (string-match-p "#<window [0-9]+>" msg)))
                   (not (null (string-match-p " on " msg))))))))

(let ((w (neovm-vm-compat-make-dead-window)))
  (condition-case err
      (controlling-tty-p w)
    (error (let ((msg (error-message-string err)))
             (list (car err)
                   (not (null (string-match-p "terminal-live-p" msg)))
                   (not (null (string-match-p "#<window [0-9]+>" msg)))
                   (not (null (string-match-p " on " msg))))))))

(let ((w (neovm-vm-compat-make-dead-window)))
  (condition-case err
      (suspend-tty w)
    (error (let ((msg (error-message-string err)))
             (list (car err)
                   (not (null (string-match-p "terminal-live-p" msg)))
                   (not (null (string-match-p "#<window [0-9]+>" msg)))
                   (not (null (string-match-p " on " msg))))))))

(let ((w (neovm-vm-compat-make-dead-window)))
  (condition-case err
      (resume-tty w)
    (error (let ((msg (error-message-string err)))
             (list (car err)
                   (not (null (string-match-p "terminal-live-p" msg)))
                   (not (null (string-match-p "#<window [0-9]+>" msg)))
                   (not (null (string-match-p " on " msg))))))))
