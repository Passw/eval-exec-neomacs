; Basic pcase dispatch and predicate matching
(pcase '(1 2) ((pred listp) 'yes) (_ 'no))
(pcase '(a . b) ('(a . b) 'ok) (_ 'bad))
(pcase 3 ((pred numberp) 'num) (_ 'other))

; pcase-let / pcase-let* bindings
(pcase-let (((pred numberp) 42)) (+ 1 2))
(pcase-let (((and x (pred numberp)) 9)) x)
(pcase-let* (((pred numberp) 5) ((pred numberp) 6)) (+ 7 8))
(condition-case err (pcase [1 2 3] ([a b c] (+ a b c))) (error err))
(condition-case err (pcase-let (([a b] [1 2])) (list a b)) (error err))
(condition-case err (pcase-let* (([a b] [1 2])) (list a b)) (error err))
(condition-case err (pcase [1 2 3] (`[,a ,b ,c] (+ a b c))) (error err))
(condition-case err (pcase 1 ((quote) 'x) (_ 'y)) (error err))
(condition-case err (pcase 1 ((quote 1 2 3) 'x) (_ 'y)) (error err))
(condition-case err (pcase 1 ((pred) 'x) (_ 'y)) (error err))
(condition-case err (pcase 1 ((pred integerp 2) 'x) (_ 'y)) (error err))
(condition-case err (pcase 1 ((guard) 'x) (_ 'y)) (error err))
(condition-case err (pcase 1 ((guard t 2) 'x) (_ 'y)) (error err))
(condition-case err (pcase 1 ((app) 'x) (_ 'y)) (error err))
(condition-case err (pcase 1 ((app car) 'x) (_ 'y)) (error err))
(condition-case err (pcase 1 ((app car x y) 'x) (_ 'y)) (error err))
(condition-case err (pcase 1 ((let) 'x) (_ 'y)) (error err))
(condition-case err (pcase 1 ((let x) 'x) (_ 'y)) (error err))
(condition-case err (pcase 1 ((let x 2 3) x) (_ 'y)) (error err))
(condition-case err (pcase 1 ((foo bar) 'x) (_ 'y)) (error err))
(condition-case err (pcase-let (((foo bar) 1)) 'ok) (error err))
(condition-case err (pcase-let* (((foo bar) 1)) 'ok) (error err))
(condition-case err (pcase 1 (((1 2) 3) 'x) (_ 'y)) (error err))
(condition-case err (pcase-let ((((1 2) 3) 1)) 'ok) (error err))
(condition-case err (pcase-let* ((((1 2) 3) 1)) 'ok) (error err))

; dotted-list pattern head behavior
(condition-case err (pcase '(1 . 2) ((a . b) (list a b)) (_ 'no)) (error err))
(condition-case err (pcase-let (((a . b) '(1 . 2))) (list a b)) (error err))
(condition-case err (pcase-let* (((a . b) '(1 . 2))) (list a b)) (error err))

; (or) requires at least two alternatives
(condition-case err (pcase 1 ((or) 'x) (_ 'y)) (error err))
(condition-case err (pcase 1 ((or 1) 'x) (_ 'y)) (error err))
