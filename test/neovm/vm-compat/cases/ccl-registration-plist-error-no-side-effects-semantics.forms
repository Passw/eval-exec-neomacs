; plist write errors during CCL registration should not leak registry side effects.
(setplist 'neovm-ccl-prog-bad 1)
(condition-case err
    (register-ccl-program 'neovm-ccl-prog-bad [10 0 0])
  (error err))
(register-ccl-program 'neovm-ccl-prog-good [10 0 0])
(ccl-program-p 'neovm-ccl-prog-bad)
(setplist 'neovm-ccl-map-bad 1)
(condition-case err
    (register-code-conversion-map 'neovm-ccl-map-bad [1 2 3])
  (error err))
(register-code-conversion-map 'neovm-ccl-map-good [4 5 6])
