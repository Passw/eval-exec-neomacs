; buffer.c â€” buffer operations
; current-buffer / buffer-name
(bufferp (current-buffer))
(stringp (buffer-name))

; get-buffer-create / buffer-live-p / kill-buffer
(let ((b (get-buffer-create " *test-buf-99*")))
  (buffer-live-p b))
(let ((b (get-buffer-create " *test-buf-99*")))
  (kill-buffer b)
  (not (buffer-live-p b)))

; generate-new-buffer-name
(stringp (generate-new-buffer-name "test"))
(not (equal (generate-new-buffer-name "test") (generate-new-buffer-name "test")))

; buffer-list
(listp (buffer-list))
(> (length (buffer-list)) 0)
(bufferp (car (buffer-list)))

; get-buffer
(eq (get-buffer "nonexistent-buf-99") nil)

; set-buffer / with-current-buffer
(with-temp-buffer
  (let ((b (current-buffer)))
    (with-current-buffer b
      (eq (current-buffer) b))))

; buffer-modified-p / set-buffer-modified-p
(with-temp-buffer (not (buffer-modified-p)))
(with-temp-buffer
  (insert "x")
  (buffer-modified-p))
(with-temp-buffer
  (insert "x")
  (set-buffer-modified-p nil)
  (not (buffer-modified-p)))

; buffer-local-value
(with-temp-buffer
  (setq-local test-local-var-99 42)
  (= (buffer-local-value 'test-local-var-99 (current-buffer)) 42))

; make-local-variable / local-variable-p
(with-temp-buffer
  (make-local-variable 'test-local-var-99)
  (local-variable-p 'test-local-var-99))

; kill-local-variable
(with-temp-buffer
  (make-local-variable 'test-local-var-99)
  (kill-local-variable 'test-local-var-99)
  (not (local-variable-p 'test-local-var-99)))

; buffer-base-buffer
(with-temp-buffer (eq (buffer-base-buffer) nil))

; erase-buffer
(with-temp-buffer
  (insert "hello")
  (erase-buffer)
  (= (buffer-size) 0))

; buffer-enable-undo / buffer-disable-undo
(with-temp-buffer
  (buffer-disable-undo)
  (eq buffer-undo-list t))
(with-temp-buffer
  (buffer-enable-undo)
  (not (eq buffer-undo-list t)))
