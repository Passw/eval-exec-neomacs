1	(setq vm-precompile-prefix-dir "/tmp/neovm-precompile-reader-prefix/")	OK "/tmp/neovm-precompile-reader-prefix/"
2	(progn (ignore-errors (delete-directory vm-precompile-prefix-dir t)) (make-directory vm-precompile-prefix-dir t) 'ok)	OK ok
3	(setq vm-precompile-prefix-bom-source (concat vm-precompile-prefix-dir "bom.el"))	OK "/tmp/neovm-precompile-reader-prefix/bom.el"
4	(setq vm-precompile-prefix-bom-cache (concat vm-precompile-prefix-dir "bom.neoc"))	OK "/tmp/neovm-precompile-reader-prefix/bom.neoc"
5	(ignore-errors (makunbound 'vm-precompile-prefix-bom-probe))	OK vm-precompile-prefix-bom-probe
6	(let ((orig (current-buffer)) (buf (get-buffer-create " *vm-precompile-prefix-bom-src*"))) (unwind-protect (progn (set-buffer buf) (erase-buffer) (insert (char-to-string 65279)) (insert "(setq vm-precompile-prefix-bom-probe 'bom)") (insert (char-to-string 10)) (write-region nil nil vm-precompile-prefix-bom-source nil nil)) (set-buffer orig) (kill-buffer buf)))	OK nil
7	(string= (neovm-precompile-file vm-precompile-prefix-bom-source) vm-precompile-prefix-bom-cache)	OK t
8	(file-exists-p vm-precompile-prefix-bom-cache)	OK t
9	(boundp 'vm-precompile-prefix-bom-probe)	OK nil
10	(load-file vm-precompile-prefix-bom-source)	OK t
11	(eq vm-precompile-prefix-bom-probe 'bom)	OK t
12	(setq vm-precompile-prefix-shebang-source (concat vm-precompile-prefix-dir "shebang.el"))	OK "/tmp/neovm-precompile-reader-prefix/shebang.el"
13	(setq vm-precompile-prefix-shebang-cache (concat vm-precompile-prefix-dir "shebang.neoc"))	OK "/tmp/neovm-precompile-reader-prefix/shebang.neoc"
14	(ignore-errors (makunbound 'vm-precompile-prefix-shebang-probe))	OK vm-precompile-prefix-shebang-probe
15	(ignore-errors (makunbound 'vm-precompile-prefix-shebang-fn))	OK vm-precompile-prefix-shebang-fn
16	(let ((orig (current-buffer)) (buf (get-buffer-create " *vm-precompile-prefix-shebang-src*"))) (unwind-protect (progn (set-buffer buf) (erase-buffer) (insert "#!/usr/bin/env emacs --script") (insert (char-to-string 10)) (insert ";; -*- lexical-binding: t; -*-") (insert (char-to-string 10)) (insert "(setq vm-precompile-prefix-shebang-probe lexical-binding)") (insert (char-to-string 10)) (insert "(setq vm-precompile-prefix-shebang-fn (let ((x 41)) (lambda () (+ x 1))))") (insert (char-to-string 10)) (write-region nil nil vm-precompile-prefix-shebang-source nil nil)) (set-buffer orig) (kill-buffer buf)))	OK nil
17	(string= (neovm-precompile-file vm-precompile-prefix-shebang-source) vm-precompile-prefix-shebang-cache)	OK t
18	(file-exists-p vm-precompile-prefix-shebang-cache)	OK t
19	(boundp 'vm-precompile-prefix-shebang-probe)	OK nil
20	(load-file vm-precompile-prefix-shebang-source)	OK t
21	(eq vm-precompile-prefix-shebang-probe t)	OK t
22	(let ((lexical-binding nil)) (funcall vm-precompile-prefix-shebang-fn))	OK 42
23	(setq vm-precompile-prefix-noncookie-source (concat vm-precompile-prefix-dir "noncookie.el"))	OK "/tmp/neovm-precompile-reader-prefix/noncookie.el"
24	(setq vm-precompile-prefix-noncookie-cache (concat vm-precompile-prefix-dir "noncookie.neoc"))	OK "/tmp/neovm-precompile-reader-prefix/noncookie.neoc"
25	(ignore-errors (makunbound 'vm-precompile-prefix-noncookie-probe))	OK vm-precompile-prefix-noncookie-probe
26	(ignore-errors (makunbound 'vm-precompile-prefix-noncookie-fn))	OK vm-precompile-prefix-noncookie-fn
27	(let ((orig (current-buffer)) (buf (get-buffer-create " *vm-precompile-prefix-noncookie-src*"))) (unwind-protect (progn (set-buffer buf) (erase-buffer) (insert "#!/usr/bin/env emacs --script") (insert (char-to-string 10)) (insert "(setq vm-precompile-prefix-noncookie-string \"lexical-binding: t\")") (insert (char-to-string 10)) (insert "(setq vm-precompile-prefix-noncookie-probe lexical-binding)") (insert (char-to-string 10)) (insert "(setq vm-precompile-prefix-noncookie-fn (let ((x 41)) (lambda () (+ x 1))))") (insert (char-to-string 10)) (write-region nil nil vm-precompile-prefix-noncookie-source nil nil)) (set-buffer orig) (kill-buffer buf)))	OK nil
28	(string= (neovm-precompile-file vm-precompile-prefix-noncookie-source) vm-precompile-prefix-noncookie-cache)	OK t
29	(file-exists-p vm-precompile-prefix-noncookie-cache)	OK t
30	(boundp 'vm-precompile-prefix-noncookie-probe)	OK nil
31	(load-file vm-precompile-prefix-noncookie-source)	OK t
32	(eq vm-precompile-prefix-noncookie-probe nil)	OK t
33	(condition-case err (let ((lexical-binding nil)) (funcall vm-precompile-prefix-noncookie-fn)) (error (list 'error (car err))))	OK (error void-variable)
34	(delete-file vm-precompile-prefix-bom-source)	OK nil
35	(delete-file vm-precompile-prefix-bom-cache)	OK nil
36	(delete-file vm-precompile-prefix-shebang-source)	OK nil
37	(delete-file vm-precompile-prefix-shebang-cache)	OK nil
38	(delete-file vm-precompile-prefix-noncookie-source)	OK nil
39	(delete-file vm-precompile-prefix-noncookie-cache)	OK nil
40	(delete-directory vm-precompile-prefix-dir t)	OK nil
41	(ignore-errors (makunbound 'vm-precompile-prefix-bom-probe))	OK vm-precompile-prefix-bom-probe
42	(ignore-errors (makunbound 'vm-precompile-prefix-shebang-probe))	OK vm-precompile-prefix-shebang-probe
43	(ignore-errors (makunbound 'vm-precompile-prefix-shebang-fn))	OK vm-precompile-prefix-shebang-fn
44	(ignore-errors (makunbound 'vm-precompile-prefix-noncookie-probe))	OK vm-precompile-prefix-noncookie-probe
45	(ignore-errors (makunbound 'vm-precompile-prefix-noncookie-fn))	OK vm-precompile-prefix-noncookie-fn
