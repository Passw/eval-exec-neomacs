; save-excursion/save-restriction runtime unwind and restore behavior.
(fboundp 'save-excursion)
(fboundp 'save-restriction)
(with-temp-buffer
  (insert "abcdef")
  (goto-char 4)
  (save-excursion
    (goto-char 2)
    (point))
  (point))
(with-temp-buffer
  (insert "abcdef")
  (goto-char 4)
  (condition-case _err
      (save-excursion
        (goto-char 2)
        (signal 'error '("boom")))
    (error nil))
  (point))
(with-temp-buffer
  (insert "abcdef")
  (narrow-to-region 2 5)
  (save-restriction
    (widen)
    (list (point-min) (point-max)))
  (list (point-min) (point-max)))
(with-temp-buffer
  (insert "abcdef")
  (narrow-to-region 2 5)
  (condition-case _err
      (save-restriction
        (widen)
        (signal 'error '("boom")))
    (error nil))
  (list (point-min) (point-max)))
(with-temp-buffer
  (insert "abcdef")
  (narrow-to-region 2 5)
  (save-restriction)
  (list (point-min) (point-max)))

