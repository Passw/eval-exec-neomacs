(fboundp 'buffer-base-buffer)
(subrp (symbol-function 'buffer-base-buffer))
(subr-arity (symbol-function 'buffer-base-buffer))

(fboundp 'buffer-last-name)
(subrp (symbol-function 'buffer-last-name))
(subr-arity (symbol-function 'buffer-last-name))

(with-temp-buffer
  (list 'live
        (buffer-base-buffer (current-buffer))
        (stringp (buffer-last-name (current-buffer)))))

(with-temp-buffer
  (list 'nil-arg
        (buffer-base-buffer nil)
        (stringp (buffer-last-name nil))))

(condition-case err
    (buffer-base-buffer 'x)
  (error (list 'base-type (car err) (cdr err))))

(condition-case err
    (buffer-last-name 'x)
  (error (list 'last-type (car err) (cdr err))))

(condition-case err
    (buffer-base-buffer nil nil)
  (wrong-number-of-arguments (car err)))

(condition-case err
    (buffer-last-name nil nil)
  (wrong-number-of-arguments (car err)))

(let* ((b (generate-new-buffer " *bln-dead*"))
       (name (buffer-name b)))
  (kill-buffer b)
  (list 'dead
        (buffer-base-buffer b)
        (equal (buffer-last-name b) name)))
