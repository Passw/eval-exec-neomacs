; pcase-dolist fallback macro introspection, expansion, and runtime parity.
(fboundp 'pcase-dolist)
(macrop 'pcase-dolist)
(functionp 'pcase-dolist)
(autoloadp (symbol-function 'pcase-dolist))
(autoloadp (indirect-function 'pcase-dolist))
(let ((f (symbol-function 'pcase-dolist))) (list (car f) (nth 1 f) (nth 3 f) (nth 4 f)))
(let ((f (indirect-function 'pcase-dolist))) (list (car f) (nth 1 f) (nth 3 f) (nth 4 f)))
(func-arity 'pcase-dolist)
(macroexpand '(pcase-dolist (x '(1 2 3)) x))
(macroexpand '(pcase-dolist (`(,k ,v) '((a 1) (b 2))) (list k v)))
(condition-case err (macroexpand '(pcase-dolist)) (error err))
(condition-case err (macroexpand '(pcase-dolist 1)) (error err))
(condition-case err (macroexpand '(pcase-dolist (x))) (error err))
(condition-case err (macroexpand '(pcase-dolist x x)) (error err))
(let ((a (func-arity 'pcase-dolist))
      (b (condition-case err (func-arity (indirect-function 'pcase-dolist)) (error err)))
      (c (autoloadp (indirect-function 'pcase-dolist))))
  (list a b c))
(let ((acc nil))
  (pcase-dolist (x '(1 2 3))
    (setq acc (cons x acc)))
  (nreverse acc))
