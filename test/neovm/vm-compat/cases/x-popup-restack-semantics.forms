;; Popup/dialog surface plus safe x-frame-restack arity checks.
(mapcar (lambda (sym)
          (list sym
                (fboundp sym)
                (subrp (symbol-function sym))
                (subr-arity (symbol-function sym))))
        '(x-popup-dialog x-popup-menu x-frame-restack))

(let ((term (car (terminal-list))))
  (list
   (list 'x-popup-dialog
         (condition-case err (x-popup-dialog nil nil) (error err))
         (condition-case err (x-popup-dialog (selected-frame) nil) (error err))
         (condition-case err (x-popup-dialog (selected-frame) '("A")) (error err))
         (condition-case err (x-popup-dialog (selected-frame) '("Title" ("Yes" . t))) (error err))
         (condition-case err (x-popup-dialog "x" nil) (error err))
         (condition-case err (x-popup-dialog term nil) (error err))
         (condition-case err (x-popup-dialog 1 nil) (error err))
         (condition-case err (x-popup-dialog) (error (car err)))
         (condition-case err (x-popup-dialog nil) (error (car err)))
         (condition-case err (x-popup-dialog nil nil nil nil) (error (car err))))))

(let ((term (car (terminal-list))))
  (list
   (list 'x-popup-menu
         (condition-case err (x-popup-menu nil nil) (error err))
         (condition-case err (x-popup-menu nil '("A" ("Yes" . t))) (error err))
         (condition-case err (x-popup-menu "x" nil) (error err))
         (condition-case err (x-popup-menu term nil) (error err))
         (condition-case err (x-popup-menu 1 nil) (error err))
         (condition-case err (x-popup-menu '(0 0) nil) (error err))
         (condition-case err (x-popup-menu '(0 0) '("A" ("Yes" . t))) (error err))
         (condition-case err (x-popup-menu '(nil nil) nil) (error err))
         (condition-case err (x-popup-menu '(nil nil) '("A" ("Yes" . t))) (error err))
         (condition-case err (x-popup-menu '((0 0) . 0) nil) (error err))
         (condition-case err (x-popup-menu) (error (car err)))
         (condition-case err (x-popup-menu nil) (error (car err)))
         (condition-case err (x-popup-menu nil nil nil) (error (car err))))))

(list
 (list 'x-frame-restack
       (condition-case err (x-frame-restack) (error (car err)))
       (condition-case err (x-frame-restack nil) (error (car err)))
       (condition-case err (x-frame-restack nil nil nil nil) (error (car err)))))
