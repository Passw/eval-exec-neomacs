(list (fboundp 'fit-window-to-buffer)
      (subr-arity (symbol-function 'fit-window-to-buffer)))

(windowp (funcall #'fit-window-to-buffer))
(windowp (apply #'fit-window-to-buffer '()))
(let ((fn (indirect-function 'fit-window-to-buffer)))
  (windowp (funcall fn)))

(save-current-buffer
  (let ((w (split-window)))
    (unwind-protect
        (list (windowp (funcall #'fit-window-to-buffer w))
              (windowp (apply #'fit-window-to-buffer (list w 5 1 80 nil)))
              (windowp (funcall (indirect-function 'fit-window-to-buffer) w nil nil nil t)))
      (when (window-live-p w)
        (delete-window w)))))

(let ((w (split-window)))
  (delete-window w)
  (list (condition-case err (funcall #'fit-window-to-buffer w) (error (car err)))
        (condition-case err (apply #'fit-window-to-buffer (list w)) (error (car err)))
        (condition-case err (funcall (indirect-function 'fit-window-to-buffer) w) (error (car err)))))

(list (condition-case err (funcall #'fit-window-to-buffer 999999) (error (car err)))
      (condition-case err (apply #'fit-window-to-buffer '(999999)) (error (car err)))
      (condition-case err (funcall #'fit-window-to-buffer 'foo) (error (car err)))
      (condition-case err (apply #'fit-window-to-buffer '(foo)) (error (car err)))
      (condition-case err (funcall #'fit-window-to-buffer nil nil nil nil nil nil) (error (car err)))
      (condition-case err (apply #'fit-window-to-buffer '(nil nil nil nil nil nil)) (error (car err))))
