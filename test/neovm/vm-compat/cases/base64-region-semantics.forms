(fboundp 'base64-encode-region)
(subrp (symbol-function 'base64-encode-region))
(subr-arity (symbol-function 'base64-encode-region))
(fboundp 'base64-decode-region)
(subrp (symbol-function 'base64-decode-region))
(subr-arity (symbol-function 'base64-decode-region))
(fboundp 'base64url-encode-region)
(subrp (symbol-function 'base64url-encode-region))
(subr-arity (symbol-function 'base64url-encode-region))

(with-temp-buffer
  (insert "Hi")
  (list 'encode-basic
        (base64-encode-region (point-min) (point-max) t)
        (buffer-string)
        (point)))

(with-temp-buffer
  (insert "Hi")
  (list 'encode-swap
        (base64-encode-region (point-max) (point-min) t)
        (buffer-string)
        (point)))

(with-temp-buffer
  (insert "SGk=")
  (list 'decode-basic
        (base64-decode-region (point-min) (point-max))
        (buffer-string)
        (point)))

(with-temp-buffer
  (insert "SGk=")
  (list 'decode-swap
        (base64-decode-region (point-max) (point-min))
        (buffer-string)
        (point)))

(with-temp-buffer
  (insert "ab")
  (list 'url-encode-pad
        (base64url-encode-region (point-min) (point-max))
        (buffer-string)))

(with-temp-buffer
  (insert "ab")
  (list 'url-encode-no-pad
        (base64url-encode-region (point-min) (point-max) t)
        (buffer-string)))

(with-temp-buffer
  (insert "%%")
  (condition-case err
      (base64-decode-region (point-min) (point-max))
    (error (list 'decode-invalid-strict (car err) (cdr err) (buffer-string) (point)))))

(with-temp-buffer
  (insert "%%")
  (list 'decode-invalid-noerror
        (base64-decode-region (point-min) (point-max) nil t)
        (buffer-string)
        (point)))

(condition-case err
    (base64-encode-region)
  (wrong-number-of-arguments (car err)))

(condition-case err
    (base64-encode-region 1 2 t nil)
  (wrong-number-of-arguments (car err)))

(condition-case err
    (base64-decode-region)
  (wrong-number-of-arguments (car err)))

(condition-case err
    (base64url-encode-region)
  (wrong-number-of-arguments (car err)))

(condition-case err
    (base64url-encode-region 1 2 t nil)
  (wrong-number-of-arguments (car err)))

(with-temp-buffer
  (insert "Hi")
  (condition-case err
      (base64-encode-region 'x 2 t)
    (error (list 'encode-type (car err) (cdr err)))))

(with-temp-buffer
  (insert "SGk=")
  (condition-case err
      (base64-decode-region 1 'x)
    (error (list 'decode-type (car err) (cdr err)))))

(with-temp-buffer
  (insert "Hi")
  (condition-case err
      (base64-encode-region 0 2 t)
    (error
     (list 'encode-range (car err) (bufferp (nth 1 err)) (nth 2 err) (nth 3 err)))))

(with-temp-buffer
  (insert "SGk=")
  (condition-case err
      (base64-decode-region 1 6)
    (error
     (list 'decode-range (car err) (bufferp (nth 1 err)) (nth 2 err) (nth 3 err)))))
