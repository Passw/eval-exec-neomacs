; save-match-data macro boundary: introspection, restore semantics, and macroexpand shape.
(fboundp 'save-match-data)
(macrop 'save-match-data)
(special-form-p 'save-match-data)
(functionp 'save-match-data)
(func-arity 'save-match-data)
(func-arity (indirect-function 'save-match-data))
(let ((before (progn (set-match-data '(1 2)) (match-data))))
  (list (save-match-data (set-match-data '(3 4)) (match-data))
        (match-data)
        (equal (match-data) before)))
(progn
  (set-match-data '(1 2))
  (list (condition-case err
            (save-match-data (set-match-data '(5 6)) (error "boom"))
          (error (car err)))
        (match-data)))
(macroexpand '(save-match-data (string-match "a" "a")))
