(let* ((ht (make-hash-table :test 'eq :size 5))
       (a (copy-sequence "x"))
       (b (copy-sequence "x")))
  (puthash a 'a ht)
  (puthash b 'b ht)
  (let ((cp (copy-hash-table ht)))
    (maphash
     (lambda (k _v)
       (when (stringp k)
         (aset k 0 ?y)))
     cp)
    (let* ((entries (apply #'append (internal--hash-table-buckets cp)))
           (keys (mapcar #'car entries)))
      (list (hash-table-count cp)
            (length entries)
            (not (memq nil keys))
            (equal '("y" "y")
                   (sort (mapcar #'copy-sequence keys) #'string<))
            (gethash a cp 'miss)
            (gethash b cp 'miss)))))
