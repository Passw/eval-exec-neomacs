; pcase-let/pcase-let* fallback macro introspection, expansion, and runtime parity.
(fboundp 'pcase-let)
(fboundp 'pcase-let*)
(macrop 'pcase-let)
(macrop 'pcase-let*)
(functionp 'pcase-let)
(functionp 'pcase-let*)
(autoloadp (symbol-function 'pcase-let))
(autoloadp (indirect-function 'pcase-let))
(let ((f (symbol-function 'pcase-let))) (list (car f) (nth 1 f) (nth 3 f) (nth 4 f)))
(let ((d (nth 2 (symbol-function 'pcase-let))))
  (list (stringp d) (string-match-p "Like `let'" d)))
(autoloadp (symbol-function 'pcase-let*))
(autoloadp (indirect-function 'pcase-let*))
(func-arity 'pcase-let)
(func-arity 'pcase-let*)
(let ((a (func-arity 'pcase-let))
      (b (condition-case err (func-arity (indirect-function 'pcase-let)) (error err)))
      (c (autoloadp (indirect-function 'pcase-let))))
  (list a b c))
(let ((a (func-arity 'pcase-let*))
      (b (condition-case err (func-arity (indirect-function 'pcase-let*)) (error err)))
      (c (autoloadp (indirect-function 'pcase-let*))))
  (list a b c))
(macroexpand '(pcase-let ((x 1)) x))
(macroexpand '(pcase-let ((x 1) (y x)) (list x y)))
(macroexpand '(pcase-let* ((x 1) (y x)) (list x y)))
(condition-case err (macroexpand '(pcase-let)) (error err))
(condition-case err (macroexpand '(pcase-let*)) (error err))
(condition-case err (macroexpand '(pcase-let x x)) (error err))
(condition-case err (macroexpand '(pcase-let* x x)) (error err))
(pcase-let ((x 10) (y 20)) (+ x y))
(pcase-let* ((x 10) (y (+ x 5))) y)
