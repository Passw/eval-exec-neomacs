; pcase-let/pcase-let* fallback macro introspection, expansion, and runtime parity.
(fboundp 'pcase-let)
(fboundp 'pcase-let*)
(macrop 'pcase-let)
(macrop 'pcase-let*)
(functionp 'pcase-let)
(functionp 'pcase-let*)
(autoloadp (symbol-function 'pcase-let))
(autoloadp (indirect-function 'pcase-let))
(let ((f (symbol-function 'pcase-let))) (list (car f) (nth 1 f) (nth 3 f) (nth 4 f)))
(let ((d (nth 2 (symbol-function 'pcase-let))))
  (list (stringp d) (string-match-p "Like `let'" d)))
(autoloadp (symbol-function 'pcase-let*))
(autoloadp (indirect-function 'pcase-let*))
(func-arity 'pcase-let)
(func-arity 'pcase-let*)
(let ((a (func-arity 'pcase-let))
      (b (condition-case err (func-arity (indirect-function 'pcase-let)) (error err)))
      (c (autoloadp (indirect-function 'pcase-let))))
  (list a b c))
(let ((a (func-arity 'pcase-let*))
      (b (condition-case err (func-arity (indirect-function 'pcase-let*)) (error err)))
      (c (autoloadp (indirect-function 'pcase-let*))))
  (list a b c))
(macroexpand '(pcase-let ((x 1)) x))
(macroexpand '(pcase-let ((x 1) (y x)) (list x y)))
(macroexpand '(pcase-let* ((x 1) (y x)) (list x y)))
(macroexpand '(pcase-let nil x))
(macroexpand '(pcase-let* nil x))
(macroexpand '(pcase-let nil a b))
(macroexpand '(pcase-let ((x 1))))
(macroexpand '(pcase-let ((`(,a ,b) '(1 2)))))
(macroexpand '(pcase-let (x)))
(macroexpand '(pcase-let ((x . y) (z . w))))
(condition-case err (macroexpand '(pcase-let ((x . y) z))) (error err))
(macroexpand '(pcase-let* ((x 1))))
(macroexpand '(pcase-let* ((`(,a ,b) '(1 2)))))
(condition-case err (macroexpand '(pcase-let* x)) (error err))
(macroexpand '(pcase-let ((x 1) (`(,a ,b) '(2 3))) (list x a b)))
(macroexpand '(pcase-let ((`(,a ,b) '(1 2)) (`(,c ,d) '(3 4))) (list a b c d)))
(macroexpand '(pcase-let* ((`(,a ,b) '(1 2)) (z (+ a b))) (list z a b)))
(macroexpand '(pcase-let* ((x 1) (`(,a ,b) '(1 2)) (z (+ a b))) (list x z a b)))
(macroexpand '(pcase-let* ((`(,a \, b) '(1 2 3))) (list a b)))
(macroexpand '(pcase-let* ((`(,a ,b \, rest) '(1 2 3 4))) (list a b rest)))
(macroexpand '(pcase-let* ((`(,a ,b) '(1 2)) (`(,c ,d) '(3 4))) (list a b c d)))
(macroexpand '(pcase-let* ((`[,a ,b] [1 2])) (list a b)))
(condition-case err (macroexpand '(pcase-let)) (error err))
(condition-case err (macroexpand '(pcase-let*)) (error err))
(condition-case err (macroexpand '(pcase-let x x)) (error err))
(condition-case err (macroexpand '(pcase-let* x x)) (error err))
(pcase-let ((x 10) (y 20)) (+ x y))
(pcase-let* ((x 10) (y (+ x 5))) y)
(condition-case err (macroexpand '(pcase-let (x . y) x)) (error err))
(condition-case err (macroexpand '(pcase-let (x . y))) (error err))
(condition-case err (macroexpand '(pcase-let ((x . y) z) q)) (error err))
(condition-case err (macroexpand '(pcase-let* (((x . y) 1) q) r)) (error err))
(condition-case err (macroexpand '(pcase-let* (((x . y) 1) (z 2)) z)) (error err))
(macroexpand '(pcase-let ((x 1 2)) q))
