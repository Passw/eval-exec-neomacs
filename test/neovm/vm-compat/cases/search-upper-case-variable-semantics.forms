(with-temp-buffer
  (insert "a")
  (goto-char (point-min))
  (let ((case-fold-search t)
        (search-upper-case nil))
    (replace-string "A" "x"))
  (buffer-string))

(with-temp-buffer
  (insert "a")
  (goto-char (point-min))
  (let ((case-fold-search t)
        (search-upper-case nil))
    (replace-regexp "A" "x"))
  (buffer-string))

(with-temp-buffer
  (insert "a")
  (goto-char (point-min))
  (let ((case-fold-search t)
        (search-upper-case nil)
        (unread-command-events (list ?!)))
    (query-replace "A" "x"))
  (buffer-string))

(with-temp-buffer
  (insert "a")
  (goto-char (point-min))
  (let ((case-fold-search t)
        (search-upper-case nil)
        (unread-command-events (list ?!)))
    (query-replace-regexp "A" "x"))
  (buffer-string))

(with-temp-buffer
  (insert (concat "a" (char-to-string 10)))
  (goto-char (point-min))
  (let ((case-fold-search t)
        (search-upper-case nil))
    (keep-lines "A"))
  (split-string (buffer-string) (char-to-string 10) t))

(with-temp-buffer
  (insert (concat "a" (char-to-string 10)))
  (goto-char (point-min))
  (let ((case-fold-search t)
        (search-upper-case nil))
    (flush-lines "A"))
  (split-string (buffer-string) (char-to-string 10) t))

(with-temp-buffer
  (insert "a")
  (goto-char (point-min))
  (let ((case-fold-search t)
        (search-upper-case nil))
    (count-matches "A")))

(with-temp-buffer
  (insert "a")
  (goto-char (point-min))
  (let ((case-fold-search t)
        (search-upper-case nil))
    (how-many "A")))
