(fboundp 'replace-string)
(fboundp 'replace-regexp)

(with-temp-buffer
  (insert "abc")
  (goto-char (point-max))
  (replace-string "" "x" nil nil nil t)
  (list (buffer-string) (point)))

(with-temp-buffer
  (insert "abc")
  (goto-char (point-min))
  (replace-string "" "x" nil nil nil t)
  (list (buffer-string) (point)))

(with-temp-buffer
  (insert "abc")
  (goto-char (point-max))
  (replace-regexp "" "x" nil nil nil t)
  (list (buffer-string) (point)))

(with-temp-buffer
  (insert "abc")
  (goto-char (point-max))
  (replace-string "a" "z" nil 2 4 t)
  (list (buffer-string) (point)))

(with-temp-buffer
  (insert "abcabc")
  (goto-char (point-max))
  (replace-regexp "a" "z" nil 2 5 t)
  (list (buffer-string) (point)))
