(subr-arity (symbol-function 'setenv))

(condition-case err (setenv nil "v") (error err))
(condition-case err (setenv "NEOVM_SETENV_CASE" 1) (error err))
(condition-case err (setenv "NEOVM_SETENV_CASE" "v" nil nil) (error err))

(let ((old (getenv "NEOVM_SETENV_CASE")))
  (unwind-protect
      (list (setenv "NEOVM_SETENV_CASE" [118 97 108])
            (getenv "NEOVM_SETENV_CASE"))
    (setenv "NEOVM_SETENV_CASE" old)))

(condition-case err (setenv "NEOVM_SETENV_CASE" [118 97 108] t) (error err))

(let ((old (getenv "NEOVM_SETENV_CASE")))
  (unwind-protect
      (list (setenv "NEOVM_SETENV_CASE" '(118 97 108))
            (getenv "NEOVM_SETENV_CASE"))
    (setenv "NEOVM_SETENV_CASE" old)))

(let ((old (getenv "NEOVM_SETENV_CASE")))
  (unwind-protect
      (progn
        (setenv "NEOVM_SETENV_CASE" "$HOME")
        (getenv "NEOVM_SETENV_CASE"))
    (setenv "NEOVM_SETENV_CASE" old)))

(let ((old (getenv "NEOVM_SETENV_CASE")))
  (unwind-protect
      (progn
        (setenv "NEOVM_SETENV_CASE" "$HOME" t)
        (getenv "NEOVM_SETENV_CASE"))
    (setenv "NEOVM_SETENV_CASE" old)))

(condition-case err (setenv "NEOVM_SETENV_CASE" '(118 . 97)) (error err))
