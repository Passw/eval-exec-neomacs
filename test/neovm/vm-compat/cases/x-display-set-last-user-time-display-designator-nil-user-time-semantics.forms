; With USER-TIME=nil, x-display-set-last-user-time keeps the same
; batch/no-X initialization payload regardless of DISPLAY designator shape.
(defun neovm-vm-compat-make-dead-window ()
  (let ((w (split-window)))
    (delete-window w)
    w))

(let ((dead (neovm-vm-compat-make-dead-window)))
  (mapcar (lambda (display)
            (condition-case err
                (x-display-set-last-user-time display nil)
              (error (list (car err) (cadr err)))))
          (list nil
                "x"
                1
                'foo
                [foo]
                '(foo)
                '(foo . bar)
                (selected-frame)
                (car (terminal-list))
                (selected-window)
                dead)))
