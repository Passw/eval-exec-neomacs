(defun neovm-vm-compat-make-dead-window ()
  (let ((w (split-window (selected-window) nil 'below)))
    (delete-window w)
    w))
(null (x-device-class nil))
(null (x-device-class "x"))
(let ((arg 1))
  (condition-case err
      (x-device-class arg)
    (error (list (eq (car err) 'wrong-type-argument)
                 (eq (cadr err) 'stringp)
                 (equal (nth 2 err) arg)))))
(let ((arg ?A))
  (condition-case err
      (x-device-class arg)
    (error (list (eq (car err) 'wrong-type-argument)
                 (eq (cadr err) 'stringp)
                 (equal (nth 2 err) arg)))))
(let ((arg 'foo))
  (condition-case err
      (x-device-class arg)
    (error (list (eq (car err) 'wrong-type-argument)
                 (eq (cadr err) 'char-or-string-p)
                 (eq (nth 2 err) arg)))))
(let ((arg [foo]))
  (condition-case err
      (x-device-class arg)
    (error (list (eq (car err) 'wrong-type-argument)
                 (eq (cadr err) 'char-or-string-p)
                 (equal (nth 2 err) arg)))))
(let ((arg '(foo)))
  (condition-case err
      (x-device-class arg)
    (error (list (eq (car err) 'wrong-type-argument)
                 (eq (cadr err) 'char-or-string-p)
                 (equal (nth 2 err) arg)))))
(let ((arg '(foo . bar)))
  (condition-case err
      (x-device-class arg)
    (error (list (eq (car err) 'wrong-type-argument)
                 (eq (cadr err) 'char-or-string-p)
                 (equal (nth 2 err) arg)))))
(let ((arg (selected-frame)))
  (condition-case err
      (x-device-class arg)
    (error (list (eq (car err) 'wrong-type-argument)
                 (eq (cadr err) 'char-or-string-p)
                 (framep (nth 2 err))))))
(let ((arg (car (terminal-list))))
  (condition-case err
      (x-device-class arg)
    (error (list (eq (car err) 'wrong-type-argument)
                 (eq (cadr err) 'char-or-string-p)
                 (terminalp (nth 2 err))))))
(let ((arg (selected-window)))
  (condition-case err
      (x-device-class arg)
    (error (list (eq (car err) 'wrong-type-argument)
                 (eq (cadr err) 'char-or-string-p)
                 (windowp (nth 2 err))
                 (window-live-p (nth 2 err))))))
(let ((arg (neovm-vm-compat-make-dead-window)))
  (condition-case err
      (x-device-class arg)
    (error (list (eq (car err) 'wrong-type-argument)
                 (eq (cadr err) 'char-or-string-p)
                 (windowp (nth 2 err))
                 (not (window-live-p (nth 2 err)))))))
(condition-case err
    (x-device-class)
  (error err))
(condition-case err
    (x-device-class nil nil)
  (error err))
