1	(setq vm-precompile-rw-dir "/tmp/neovm-precompile-cache-rewrite/")	OK "/tmp/neovm-precompile-cache-rewrite/"
2	(progn (ignore-errors (delete-directory vm-precompile-rw-dir t)) (make-directory vm-precompile-rw-dir t) 'ok)	OK ok
3	(setq vm-precompile-rw-source (concat vm-precompile-rw-dir "probe.el"))	OK "/tmp/neovm-precompile-cache-rewrite/probe.el"
4	(setq vm-precompile-rw-cache (concat vm-precompile-rw-dir "probe.neoc"))	OK "/tmp/neovm-precompile-cache-rewrite/probe.neoc"
5	(let ((orig (current-buffer)) (buf (get-buffer-create " *vm-precompile-rw-src-v1*"))) (unwind-protect (progn (set-buffer buf) (erase-buffer) (insert "(setq vm-precompile-rw-probe 'v1)") (insert (char-to-string 10)) (write-region nil nil vm-precompile-rw-source nil nil)) (set-buffer orig) (kill-buffer buf)))	OK nil
6	(string= (neovm-precompile-file vm-precompile-rw-source) vm-precompile-rw-cache)	OK t
7	(file-exists-p vm-precompile-rw-cache)	OK t
8	(let ((text (let ((orig (current-buffer)) (buf (get-buffer-create " *vm-precompile-rw-cache-v1*"))) (unwind-protect (progn (set-buffer buf) (erase-buffer) (insert-file-contents vm-precompile-rw-cache) (buffer-string)) (set-buffer orig) (kill-buffer buf))))) (setq vm-precompile-rw-cache-v1 text) (stringp vm-precompile-rw-cache-v1))	OK t
9	(let ((orig (current-buffer)) (buf (get-buffer-create " *vm-precompile-rw-src-v2*"))) (unwind-protect (progn (set-buffer buf) (erase-buffer) (insert ";;; -*- lexical-binding: t; -*-") (insert (char-to-string 10)) (insert "(setq vm-precompile-rw-probe 'v2)") (insert (char-to-string 10)) (write-region nil nil vm-precompile-rw-source nil nil)) (set-buffer orig) (kill-buffer buf)))	OK nil
10	(string= (neovm-precompile-file vm-precompile-rw-source) vm-precompile-rw-cache)	OK t
11	(file-exists-p vm-precompile-rw-cache)	OK t
12	(let ((text (let ((orig (current-buffer)) (buf (get-buffer-create " *vm-precompile-rw-cache-v2*"))) (unwind-protect (progn (set-buffer buf) (erase-buffer) (insert-file-contents vm-precompile-rw-cache) (buffer-string)) (set-buffer orig) (kill-buffer buf))))) (setq vm-precompile-rw-cache-v2 text) (stringp vm-precompile-rw-cache-v2))	OK t
13	(not (string= vm-precompile-rw-cache-v1 vm-precompile-rw-cache-v2))	OK t
14	(and (not (null (string-match-p "source-hash=" vm-precompile-rw-cache-v1))) (not (null (string-match-p "source-hash=" vm-precompile-rw-cache-v2))))	OK t
15	(and (not (null (string-match-p "lexical=0" vm-precompile-rw-cache-v1))) (not (null (string-match-p "lexical=1" vm-precompile-rw-cache-v2))))	OK t
16	(delete-file vm-precompile-rw-source)	OK nil
17	(delete-file vm-precompile-rw-cache)	OK nil
18	(delete-directory vm-precompile-rw-dir t)	OK nil
