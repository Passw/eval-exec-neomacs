(fboundp 'key-binding)
(subr-arity (symbol-function 'key-binding))

(with-temp-buffer
  (let ((g (make-sparse-keymap)))
    (use-global-map g)
    (define-key g (kbd "a") 'forward-char)
    (let ((err (condition-case e
                   (key-binding (kbd "a") t nil 0)
                 (error e))))
      (list (car err) (bufferp (cadr err)) (caddr err)))))

(with-temp-buffer
  (let ((g (make-sparse-keymap)))
    (use-global-map g)
    (define-key g (kbd "a") 'forward-char)
    (let ((err (condition-case e
                   (key-binding (kbd "a") t nil -1)
                 (error e))))
      (list (car err) (bufferp (cadr err)) (caddr err)))))

(with-temp-buffer
  (let ((g (make-sparse-keymap)))
    (use-global-map g)
    (define-key g (kbd "a") 'forward-char)
    (let ((err (condition-case e
                   (key-binding (kbd "a") t nil 2)
                 (error e))))
      (list (car err) (bufferp (cadr err)) (caddr err)))))

(with-temp-buffer
  (let ((g (make-sparse-keymap)))
    (use-global-map g)
    (define-key g (kbd "a") 'forward-char)
    (list
     (key-binding (kbd "a") t nil 1)
     (key-binding (kbd "a") t nil t)
     (key-binding (kbd "a") t nil 'foo)
     (key-binding (kbd "a") t nil "x")
     (key-binding (kbd "a") t nil [1])
     (key-binding (kbd "a") t nil '(1))
     (key-binding (kbd "a") t nil 1.5)
     (key-binding (kbd "a") t nil (copy-marker (point))))))
