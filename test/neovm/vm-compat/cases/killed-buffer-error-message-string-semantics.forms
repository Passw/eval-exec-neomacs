(fboundp 'error-message-string)
(fboundp 'key-binding)
(fboundp 'command-remapping)
(fboundp 'get-buffer-window-list)

(let ((b (get-buffer-create "ems-kb-msg")))
  (unwind-protect
      (with-current-buffer b
        (condition-case e
            (key-binding 1 nil nil 0)
          (error (error-message-string e))))
    (kill-buffer b)))

(let ((b (get-buffer-create "ems-cr-msg")))
  (unwind-protect
      (with-current-buffer b
        (condition-case e
            (command-remapping nil 0)
          (error (error-message-string e))))
    (kill-buffer b)))

(let ((b (generate-new-buffer "gbwl-dead-msg")))
  (kill-buffer b)
  (condition-case e
      (get-buffer-window-list b)
    (error (error-message-string e))))
