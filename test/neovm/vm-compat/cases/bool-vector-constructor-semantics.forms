(fboundp 'bool-vector)
(subrp (symbol-function 'bool-vector))
(subr-arity (symbol-function 'bool-vector))

(let ((bv (bool-vector)))
  (list 'empty
        (bool-vector-p bv)
        (bool-vector-count-population bv)))

(let ((bv (bool-vector t nil 0 'x [1] "")))
  (list 'ctor
        (bool-vector-count-population bv)
        (aref bv 0)
        (aref bv 1)
        (aref bv 2)
        (aref bv 3)
        (aref bv 4)
        (aref bv 5)))

(let ((bv (bool-vector t nil nil t)))
  (list 'stats
        (bool-vector-p bv)
        (bool-vector-count-population bv)
        (bool-vector-count-consecutive bv t 0)
        (bool-vector-count-consecutive bv nil 1)
        (bool-vector-count-consecutive bv t 3)))

(let ((bv (bool-vector nil nil)))
  (aset bv 1 t)
  (list 'mutate
        (aref bv 0)
        (aref bv 1)
        (bool-vector-count-population bv)))

(let ((bv (bool-vector nil 0 nil "")))
  (list 'truth-shape
        (aref bv 0)
        (aref bv 1)
        (aref bv 2)
        (aref bv 3)))
