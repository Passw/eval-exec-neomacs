; Lock in window-returning builtins to return window objects (not integers).
(fboundp 'selected-window)
(let ((w (selected-window)))
  (list (windowp w) (not (integerp w)) (not (numberp w))
        (string-prefix-p "#<window " (prin1-to-string w))))
(let ((w (frame-selected-window (selected-frame))))
  (list (windowp w) (not (integerp w)) (not (numberp w))
        (eq w (selected-window))))
(let ((w (frame-first-window)))
  (list (windowp w) (not (integerp w)) (not (numberp w))))
(let ((w (frame-root-window)))
  (list (windowp w) (not (integerp w)) (not (numberp w))))
(let ((w (minibuffer-window)))
  (list (windowp w) (not (integerp w)) (not (numberp w))))
(let* ((wl (window-list (selected-frame)))
       (w (car wl)))
  (list (consp wl) (windowp w) (not (integerp w)) (not (numberp w))))
(let ((w (get-buffer-window "*scratch*")))
  (list (windowp w) (not (integerp w)) (not (numberp w))))
(let ((w (split-window)))
  (prog1 (list (windowp w) (not (integerp w)) (not (numberp w)))
    (delete-window w)))
(let* ((w1 (selected-window))
       (w2 (next-window w1 nil nil))
       (w3 (previous-window w1 nil nil)))
  (list (windowp w2) (not (integerp w2)) (not (numberp w2))
        (windowp w3) (not (integerp w3)) (not (numberp w3))))
(let ((w (display-buffer "*scratch*")))
  (list (windowp w) (not (integerp w)) (not (numberp w))))
