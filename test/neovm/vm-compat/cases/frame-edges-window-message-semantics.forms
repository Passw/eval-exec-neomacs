; frame-edges should include buffer context for live window designators,
; while dead-window payloads stay compact.
(defun neovm-vm-compat-make-dead-window ()
  (let ((w (split-window)))
    (delete-window w)
    w))

(let ((msg (condition-case err
               (frame-edges (selected-window))
             (error (error-message-string err)))))
  (list (condition-case nil
            (string-prefix-p "#<window " msg)
          (error nil))
        (condition-case nil
            (not (null (string-match-p " on " msg)))
          (error nil))
        (condition-case nil
            (string-suffix-p " is not a live frame" msg)
          (error nil))))

(let* ((w (neovm-vm-compat-make-dead-window))
       (msg (condition-case err
                (frame-edges w)
              (error (error-message-string err)))))
  (list (condition-case nil
            (not (null (string-match-p "^#<window [0-9]+> is not a live frame$" msg)))
          (error nil))
        (condition-case nil
            (not (null (string-match-p " on " msg)))
          (error nil))))
