1	(progn (fset 'neo-prompt-queue-probe (lambda (fn args queue) (let ((start (length (recent-keys)))) (setq unread-command-events queue) (condition-case err (progn (apply fn args) (list fn queue 'ok unread-command-events (append (nthcdr start (append (recent-keys) nil)) nil))) (error (list fn queue (car err) unread-command-events (append (nthcdr start (append (recent-keys) nil)) nil))))))) 'probe-installed)	OK probe-installed
2	(let ((queues '((97 . foo) (foo . 97) ((mouse-1) . foo) (97 foo) (foo 97) ((mouse-1) 97) ([97] 98) [97 98])) (probes '((read-string "") (read-number "") (read-from-minibuffer "") (completing-read "" (("a") ("b"))) (read-command "") (read-variable "") (read-buffer "") (read-file-name "")))) (mapcar (lambda (entry) (let ((fn (car entry)) (args (cdr entry))) (mapcar (lambda (queue) (neo-prompt-queue-probe fn args queue)) queues))) probes))	OK (((read-string (97 . foo) end-of-file (97 . foo) nil) (read-string (foo . 97) end-of-file (foo . 97) nil) (read-string ((mouse-1) . foo) end-of-file ((mouse-1) . foo) nil) (read-string (97 foo) end-of-file (97 foo) nil) (read-string (foo 97) end-of-file (foo 97) nil) (read-string ((mouse-1) 97) end-of-file ((mouse-1) 97) nil) (read-string ([97] 98) end-of-file ([97] 98) nil) (read-string [97 98] end-of-file [97 98] nil)) ((read-number (97 . foo) end-of-file (97 . foo) nil) (read-number (foo . 97) end-of-file (foo . 97) nil) (read-number ((mouse-1) . foo) end-of-file ((mouse-1) . foo) nil) (read-number (97 foo) end-of-file (97 foo) nil) (read-number (foo 97) end-of-file (foo 97) nil) (read-number ((mouse-1) 97) end-of-file ((mouse-1) 97) nil) (read-number ([97] 98) end-of-file ([97] 98) nil) (read-number [97 98] end-of-file [97 98] nil)) ((read-from-minibuffer (97 . foo) end-of-file (97 . foo) nil) (read-from-minibuffer (foo . 97) end-of-file (foo . 97) nil) (read-from-minibuffer ((mouse-1) . foo) end-of-file ((mouse-1) . foo) nil) (read-from-minibuffer (97 foo) end-of-file (97 foo) nil) (read-from-minibuffer (foo 97) end-of-file (foo 97) nil) (read-from-minibuffer ((mouse-1) 97) end-of-file ((mouse-1) 97) nil) (read-from-minibuffer ([97] 98) end-of-file ([97] 98) nil) (read-from-minibuffer [97 98] end-of-file [97 98] nil)) ((completing-read (97 . foo) end-of-file (97 . foo) nil) (completing-read (foo . 97) end-of-file (foo . 97) nil) (completing-read ((mouse-1) . foo) end-of-file ((mouse-1) . foo) nil) (completing-read (97 foo) end-of-file (97 foo) nil) (completing-read (foo 97) end-of-file (foo 97) nil) (completing-read ((mouse-1) 97) end-of-file ((mouse-1) 97) nil) (completing-read ([97] 98) end-of-file ([97] 98) nil) (completing-read [97 98] end-of-file [97 98] nil)) ((read-command (97 . foo) end-of-file (97 . foo) nil) (read-command (foo . 97) end-of-file (foo . 97) nil) (read-command ((mouse-1) . foo) end-of-file ((mouse-1) . foo) nil) (read-command (97 foo) end-of-file (97 foo) nil) (read-command (foo 97) end-of-file (foo 97) nil) (read-command ((mouse-1) 97) end-of-file ((mouse-1) 97) nil) (read-command ([97] 98) end-of-file ([97] 98) nil) (read-command [97 98] end-of-file [97 98] nil)) ((read-variable (97 . foo) end-of-file (97 . foo) nil) (read-variable (foo . 97) end-of-file (foo . 97) nil) (read-variable ((mouse-1) . foo) end-of-file ((mouse-1) . foo) nil) (read-variable (97 foo) end-of-file (97 foo) nil) (read-variable (foo 97) end-of-file (foo 97) nil) (read-variable ((mouse-1) 97) end-of-file ((mouse-1) 97) nil) (read-variable ([97] 98) end-of-file ([97] 98) nil) (read-variable [97 98] end-of-file [97 98] nil)) ((read-buffer (97 . foo) end-of-file (97 . foo) nil) (read-buffer (foo . 97) end-of-file (foo . 97) nil) (read-buffer ((mouse-1) . foo) end-of-file ((mouse-1) . foo) nil) (read-buffer (97 foo) end-of-file (97 foo) nil) (read-buffer (foo 97) end-of-file (foo 97) nil) (read-buffer ((mouse-1) 97) end-of-file ((mouse-1) 97) nil) (read-buffer ([97] 98) end-of-file ([97] 98) nil) (read-buffer [97 98] end-of-file [97 98] nil)) ((read-file-name (97 . foo) end-of-file (97 . foo) nil) (read-file-name (foo . 97) end-of-file (foo . 97) nil) (read-file-name ((mouse-1) . foo) end-of-file ((mouse-1) . foo) nil) (read-file-name (97 foo) end-of-file (97 foo) nil) (read-file-name (foo 97) end-of-file (foo 97) nil) (read-file-name ((mouse-1) 97) end-of-file ((mouse-1) 97) nil) (read-file-name ([97] 98) end-of-file ([97] 98) nil) (read-file-name [97 98] end-of-file [97 98] nil)))
3	(let ((queues '((97 . foo) (foo . 97) ((mouse-1) . foo) (97 foo) (foo 97) ((mouse-1) 97) ([97] 98) [97 98])) (probes '((y-or-n-p "Continue? ") (yes-or-no-p "Confirm? ")))) (mapcar (lambda (entry) (let ((fn (car entry)) (args (cdr entry))) (mapcar (lambda (queue) (neo-prompt-queue-probe fn args queue)) queues))) probes))	OK (((y-or-n-p (97 . foo) end-of-file (97 . foo) nil) (y-or-n-p (foo . 97) end-of-file (foo . 97) nil) (y-or-n-p ((mouse-1) . foo) end-of-file ((mouse-1) . foo) nil) (y-or-n-p (97 foo) end-of-file (97 foo) nil) (y-or-n-p (foo 97) end-of-file (foo 97) nil) (y-or-n-p ((mouse-1) 97) end-of-file ((mouse-1) 97) nil) (y-or-n-p ([97] 98) end-of-file ([97] 98) nil) (y-or-n-p [97 98] end-of-file [97 98] nil)) ((yes-or-no-p (97 . foo) end-of-file (97 . foo) nil) (yes-or-no-p (foo . 97) end-of-file (foo . 97) nil) (yes-or-no-p ((mouse-1) . foo) end-of-file ((mouse-1) . foo) nil) (yes-or-no-p (97 foo) end-of-file (97 foo) nil) (yes-or-no-p (foo 97) end-of-file (foo 97) nil) (yes-or-no-p ((mouse-1) 97) end-of-file ((mouse-1) 97) nil) (yes-or-no-p ([97] 98) end-of-file ([97] 98) nil) (yes-or-no-p [97 98] end-of-file [97 98] nil)))
4	(let ((queues '((97 . foo) (foo . 97) ((mouse-1) . foo) (97 foo) (foo 97) ((mouse-1) 97) ([97] 98) [97 98])) (probes '((read-coding-system "Coding: ") (read-non-nil-coding-system "Coding: ")))) (mapcar (lambda (entry) (let ((fn (car entry)) (args (cdr entry))) (mapcar (lambda (queue) (neo-prompt-queue-probe fn args queue)) queues))) probes))	OK (((read-coding-system (97 . foo) end-of-file (97 . foo) nil) (read-coding-system (foo . 97) end-of-file (foo . 97) nil) (read-coding-system ((mouse-1) . foo) end-of-file ((mouse-1) . foo) nil) (read-coding-system (97 foo) end-of-file (97 foo) nil) (read-coding-system (foo 97) end-of-file (foo 97) nil) (read-coding-system ((mouse-1) 97) end-of-file ((mouse-1) 97) nil) (read-coding-system ([97] 98) end-of-file ([97] 98) nil) (read-coding-system [97 98] end-of-file [97 98] nil)) ((read-non-nil-coding-system (97 . foo) end-of-file (97 . foo) nil) (read-non-nil-coding-system (foo . 97) end-of-file (foo . 97) nil) (read-non-nil-coding-system ((mouse-1) . foo) end-of-file ((mouse-1) . foo) nil) (read-non-nil-coding-system (97 foo) end-of-file (97 foo) nil) (read-non-nil-coding-system (foo 97) end-of-file (foo 97) nil) (read-non-nil-coding-system ((mouse-1) 97) end-of-file ((mouse-1) 97) nil) (read-non-nil-coding-system ([97] 98) end-of-file ([97] 98) nil) (read-non-nil-coding-system [97 98] end-of-file [97 98] nil)))
