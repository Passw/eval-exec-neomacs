; Compatibility coverage for new file/runtime helper wrappers.
(subr-arity (symbol-function 'make-temp-name))
(subr-arity (symbol-function 'next-read-file-uses-dialog-p))
(subr-arity (symbol-function 'unhandled-file-name-directory))
(subr-arity (symbol-function 'get-truename-buffer))
(subr-arity (symbol-function 'set-file-acl))
(subr-arity (symbol-function 'set-file-selinux-context))
(subr-arity (symbol-function 'visited-file-modtime))
(subr-arity (symbol-function 'verify-visited-file-modtime))
(subr-arity (symbol-function 'set-visited-file-modtime))
(subr-arity (symbol-function 'set-binary-mode))

(let ((s (make-temp-name "vm-temp-name-")))
  (list (stringp s)
        (string-prefix-p "vm-temp-name-" s)
        (> (length s) (length "vm-temp-name-"))))
(condition-case err (make-temp-name 1) (error err))

(next-read-file-uses-dialog-p)
(condition-case err (next-read-file-uses-dialog-p 1) (error err))

(unhandled-file-name-directory "/tmp/vm/file.txt")
(unhandled-file-name-directory "")
(condition-case err (unhandled-file-name-directory 1) (error err))

(get-truename-buffer "/tmp/neovm-no-such-file")
(condition-case err (get-truename-buffer 1) (error err))

(let ((f (make-temp-file "vm-set-file-acl-")))
  (prog1 (set-file-acl f nil)
    (delete-file f)))
(condition-case err (set-file-acl 1 nil) (error err))

(let ((f (make-temp-file "vm-set-file-selinux-")))
  (prog1 (set-file-selinux-context f "user_u:role_r:type_t:s0")
    (delete-file f)))
(condition-case err (set-file-selinux-context 1 "ctx") (error err))

(visited-file-modtime)
(condition-case err (visited-file-modtime nil) (error err))

(verify-visited-file-modtime)
(verify-visited-file-modtime nil)
(condition-case err (verify-visited-file-modtime 1) (error err))

(condition-case err
    (with-temp-buffer (set-visited-file-modtime))
  (error err))
(set-visited-file-modtime '(0 0 0 0))
(condition-case err (set-visited-file-modtime 1) (error err))

(set-binary-mode 'stdin t)
(condition-case err (set-binary-mode 'foo t) (error err))
(condition-case err (set-binary-mode nil t) (error err))
(condition-case err (set-binary-mode 1 t) (error err))
